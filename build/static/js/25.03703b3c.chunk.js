(window["webpackJsonptracker-web"]=window["webpackJsonptracker-web"]||[]).push([[25],{1048:function(e,t,n){"use strict";function r(e,t,n,r,o,c,a){try{var i=e[c](a),l=i.value}catch(u){return void n(u)}i.done?t(l):Promise.resolve(l).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,c){var a=e.apply(t,n);function i(e){r(a,o,c,i,l,"next",e)}function l(e){r(a,o,c,i,l,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return o}))},1182:function(e,t,n){"use strict";n.r(t);var r=n(1071),o=n(1046),c=n(0),a=n(48),i=n(1044),l=n(199),u=n(72),s=n(10),f=n(68),p=n(65),m=n(5),b=n(7);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=Object(f.c)((function(e){var t=e.project;return{projectInfo:t.projectInfo,projectList:t.projectList}}),(function(e){return Object(p.b)({handleUpdateProject:function(e){return m.ib.request(e)}},e)}))(o.a.create()(o.a.create()((function(e){var t=e.form,n=e.projectInfo,r=e.handleUpdateProject,f=e.projectList,p=t.getFieldDecorator;return c.createElement(o.a,Object.assign({onSubmit:function(e){e.preventDefault(),t.validateFields((function(e,t){e?Object(b.v)(e):r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.id},t))}))},style:{maxWidth:500}},s.cb),c.createElement(o.a.Item,{label:"\u9879\u76ee\u540d\u79f0"},p("name",{initialValue:n.name,rules:[{required:!0,message:"\u9879\u76ee\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(c.createElement(i.a,null))),c.createElement(o.a.Item,{label:"trackKey"},btoa('{"projectId":'.concat(n.id,"}"))),c.createElement(o.a.Item,{label:"\u5173\u8054\u9879\u76ee"},p("associationProjectIds",{initialValue:n.associationProjects.map((function(e){return e.id}))})(c.createElement(l.a,{mode:"multiple"},f.list.filter((function(e){return e.id!==n.id})).map((function(e){return c.createElement(l.a.Option,{value:e.id,key:e.id},e.name)}))))),c.createElement(o.a.Item,s.fb,c.createElement(u.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58")))})))),O=n(81),y=n(1047),v=n(1040),E=n(8),P=n.n(E),k=n(1048),w=n(344),g=n(18);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I=Object(f.c)((function(e){return{projectInfo:e.project.projectInfo,allRoleList:e.role.allRoleList}}),(function(e){return Object(p.b)({onAddProjectMember:function(e){return m.e.request(e)}},e)}))(o.a.create()((function(e){var t=e.form.getFieldDecorator,n=l.a.Option,r=c.useState({list:[],totalCount:0}),i=Object(O.a)(r,2),u=i[0],f=i[1],p=c.useState(!1),m=Object(O.a)(p,2),d=m[0],j=m[1];c.useEffect((function(){e.form.resetFields(),u.totalCount||v("")}),[e.visible]);var v=function(){var e=Object(k.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,Object(g.fetchUserList)({page:1,pageSize:50,nickname:t,username:t});case 3:n=e.sent,f(n.data),j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.createElement(y.a,{onOk:function(t){t.preventDefault(),e.form.validateFields((function(t,n){t?Object(b.v)(t):(e.onAddProjectMember(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({projectId:e.projectInfo.id},n)),e.onClose(!1))}))},title:"\u6dfb\u52a0\u9879\u76ee\u6210\u5458",visible:e.visible,onCancel:function(){return e.onClose(!1)}},c.createElement(o.a,Object.assign({layout:"horizontal"},s.cb),c.createElement(o.a.Item,{label:"\u6dfb\u52a0\u6210\u5458"},t("userIds",{})(c.createElement(l.a,{mode:"multiple",placeholder:"\u9009\u62e9\u7528\u6237",notFoundContent:d?c.createElement(w.a,{size:"small"}):null,filterOption:!1,onSearch:v},u.list.map((function(t){return c.createElement(n,{key:t.id,value:""+t.id,disabled:!!e.projectInfo.members.find((function(e){return e.id===t.id}))},t.nickname||t.username)}))))),c.createElement(o.a.Item,{label:"\u89d2\u8272"},t("roleCode",{})(c.createElement(l.a,{placeholder:"\u9009\u62e9\u89d2\u8272"},e.allRoleList.list.filter((function(e){return 1===e.type})).map((function(e){return c.createElement(n,{key:e.id,value:""+e.code},e.name)})))))))})));function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C=l.a.Option,S=Object(f.c)((function(e){return{projectInfo:e.project.projectInfo,allRoleList:e.role.allRoleList}}),(function(e){return Object(p.b)({onDeleteProjectMember:function(e){return m.r.request(e)},onUpdateProjectMember:function(e){return m.jb.request(e)}},e)}))((function(e){var t=e.projectInfo,n=e.onDeleteProjectMember,r=e.onUpdateProjectMember,o=e.allRoleList,i=c.useState(!1),s=Object(O.a)(i,2),f=s[0],p=s[1],m=[{title:"\u59d3\u540d",dataIndex:"nickname",key:"nickname"},{title:"\u8d26\u53f7",dataIndex:"username",key:"username"},{title:"\u89d2\u8272",dataIndex:"roleName",key:"roleName"},{title:"\u64cd\u4f5c",key:"action",render:function(e,a){return c.createElement("span",null,c.createElement(u.a,{size:"small",onClick:function(){return function(e){var n="";y.a.confirm({title:"\u7f16\u8f91\u6210\u5458",content:c.createElement(l.a,{style:{width:"100%"},placeholder:"\u9009\u62e9\u89d2\u8272",value:n,onChange:function(e){n=e}},o.list.filter((function(e){return 1===e.type})).map((function(e){return c.createElement(C,{key:e.id,value:""+e.code},e.name)}))),onOk:function(){r({projectId:t.id,userIds:[e],roleCode:n})}})}(a.id)}},"\u7f16\u8f91"),"\xa0",c.createElement(u.a,{onClick:function(){return e=a.id,void y.a.warning({title:"\u63d0\u793a",content:"\u786e\u5b9a\u79fb\u9664\u8be5\u6210\u5458\u5417",okText:"\u79fb\u9664",onOk:function(){n({projectId:t.id,userIds:[e]})}});var e},size:"small"},"\u79fb\u9664"))}}];return c.createElement("div",null,c.createElement(I,{visible:f,onClose:p}),c.createElement(u.a,{onClick:function(){return p(!0)}},"\u6dfb\u52a0\u6210\u5458"),c.createElement("br",null),c.createElement("br",null),c.createElement(v.a,{style:{background:"#fff"},columns:m,dataSource:t.members.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e.id},e)}))}))})),L=r.a.TabPane;t.default=o.a.create()((function(e){return c.createElement("div",null,c.createElement(r.a,{defaultActiveKey:"1"},c.createElement(L,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},c.createElement(j,null)),c.createElement(L,{tab:"\u6210\u5458",key:"2"},c.createElement(S,null))))}))}}]);
//# sourceMappingURL=25.03703b3c.chunk.js.map