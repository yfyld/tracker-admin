(window["webpackJsonptracker-web"]=window["webpackJsonptracker-web"]||[]).push([[13],{1004:function(e,t,n){e.exports={memberBox:"TeamList_memberBox__O9kij",itemList:"TeamList_itemList__bn9js",header:"TeamList_header__1jLUP"}},1020:function(e,t,n){"use strict";n.r(t);var r=n(98),a=n(0),i=n(1004),o=n.n(i),l=n(40),c=n(2),s=n(37),u=n(44),m=n(1022),p=n(23),f=n(28),b=n(165),d=n(59),v=n(93),y=n(20);function E(e){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},S=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=h(t).call(this,e),(n=!i||"object"!==E(i)&&"function"!==typeof i?j(r):i).onConfirm=function(e){n.setVisible(!1,e);var t=n.props.onConfirm;t&&t.call(j(n),e)},n.onCancel=function(e){n.setVisible(!1,e);var t=n.props.onCancel;t&&t.call(j(n),e)},n.onVisibleChange=function(e){n.props.disabled||n.setVisible(e)},n.saveTooltip=function(e){n.tooltip=e},n.renderOverlay=function(e,t){var r=n.props,i=r.okButtonProps,o=r.cancelButtonProps,l=r.title,c=r.cancelText,s=r.okText,m=r.okType,p=r.icon;return a.createElement("div",null,a.createElement("div",{className:"".concat(e,"-inner-content")},a.createElement("div",{className:"".concat(e,"-message")},p,a.createElement("div",{className:"".concat(e,"-message-title")},l)),a.createElement("div",{className:"".concat(e,"-buttons")},a.createElement(u.a,O({onClick:n.onCancel,size:"small"},o),c||t.cancelText),a.createElement(u.a,O({onClick:n.onConfirm,type:m,size:"small"},i),s||t.okText))))},n.renderConfirm=function(e){var t=e.getPrefixCls,r=n.props,i=r.prefixCls,o=r.placement,l=w(r,["prefixCls","placement"]),c=t("popover",i),s=a.createElement(d.a,{componentName:"Popconfirm",defaultLocale:v.a.Popconfirm},(function(e){return n.renderOverlay(c,e)}));return a.createElement(b.a,O({},l,{prefixCls:c,placement:o,onVisibleChange:n.onVisibleChange,visible:n.state.visible,overlay:s,ref:n.saveTooltip}))},n.state={visible:e.visible},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,i=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}],(r=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var n=this.props;"visible"in n||this.setState({visible:e});var r=n.onVisibleChange;r&&r(e,t)}},{key:"render",value:function(){return a.createElement(y.a,null,this.renderConfirm)}}])&&g(n.prototype,r),i&&g(n,i),t}(a.Component);S.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:a.createElement(p.a,{type:"exclamation-circle",theme:"filled"}),disabled:!1},Object(f.polyfill)(S);var P=S,C=n(528),L=n(633),I=n(394),T=n(392),_=n(393),x=n(533),V=n(12),D=n(9),N=n(167),z=n.n(N),F=L.a.Option,U=T.a.create()((function(e){var t=e.form.getFieldDecorator;a.useEffect((function(){e.form.resetFields(),e.visible&&!e.userList.list.length&&e.onSearchUser({page:1,pageSize:50})}),[e.visible]);var n=z()((function(t){e.onSearchUser({nickname:t,page:1,pageSize:50})}),800);return a.createElement(I.a,{onOk:function(t){t.preventDefault(),e.form.validateFields((function(t,n){t?Object(D.p)(t):(e.onSubmit(n),e.onClose(!1))}))},title:"\u65b0\u589e\u56e2\u961f",visible:e.visible,onCancel:function(){return e.onClose(!1)}},a.createElement(T.a,Object.assign({layout:"horizontal"},V.s),a.createElement(T.a.Item,{label:"\u56e2\u961f\u540d\u79f0"},t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0"}]})(a.createElement(_.a,{placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0"}))),a.createElement(T.a.Item,{label:"\u516c\u5f00"},t("public",{initialValue:!0})(a.createElement(x.a.Group,null,a.createElement(x.a,{value:!0},"\u516c\u5f00"),a.createElement(x.a,{value:!1},"\u79c1\u6709")))),a.createElement(T.a.Item,{label:"\u56e2\u961f\u63cf\u8ff0"},t("description",{})(a.createElement(_.a,{placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u63cf\u8ff0"}))),a.createElement(T.a.Item,{label:"\u6210\u5458"},t("members",{})(a.createElement(L.a,{mode:"multiple",onSearch:n,filterOption:!1,notFoundContent:null,placeholder:"\u8bf7\u9009\u62e9\u6210\u5458"},e.userList.list.map((function(e){return a.createElement(F,{key:e.id,value:e.id},e.nickname||e.username)})))))))})),q=n(49);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var B=L.a.Option,A=T.a.create()((function(e){var t=e.form,n=t.getFieldDecorator,r=t.resetFields,i=t.validateFields;a.useEffect((function(){r(),e.visible&&!e.userList.list.length&&e.onSearchUser({page:1,pageSize:50})}),[e.visible]);var o=z()((function(t){e.onSearchUser({nickname:t,page:1,pageSize:50})}),800);return a.createElement(I.a,{onOk:function(t){t.preventDefault(),i((function(t,n){t?Object(D.p)(t):(e.onSubmit(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.orginInfo.id},n)),e.onClose(!1))}))},title:"\u7f16\u8f91\u56e2\u961f",visible:e.visible,onCancel:function(){return e.onClose(!1)}},a.createElement(T.a,Object.assign({layout:"horizontal"},V.s),a.createElement(T.a.Item,{label:"\u56e2\u961fOwner"},n("creatorId",{initialValue:e.orginInfo.creator.id})(a.createElement(L.a,{showSearch:!0,onSearch:o,filterOption:!1,notFoundContent:null,placeholder:"\u8bf7\u9009\u62e9\u56e2\u961fowner"},e.userList.list.map((function(e){return a.createElement(B,{key:e.id,value:e.id},e.nickname||e.username)}))))),a.createElement(T.a.Item,{label:"\u56e2\u961f\u540d\u79f0"},n("name",{initialValue:e.orginInfo.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0"}]})(a.createElement(_.a,{placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0"}))),a.createElement(T.a.Item,{label:"\u516c\u5f00"},n("public",{initialValue:e.orginInfo.public})(a.createElement(x.a.Group,null,a.createElement(x.a,{value:!0},"\u516c\u5f00"),a.createElement(x.a,{value:!1},"\u79c1\u6709")))),a.createElement(T.a.Item,{label:"\u56e2\u961f\u63cf\u8ff0"},n("description",{initialValue:e.orginInfo.description})(a.createElement(_.a,{placeholder:"\u8bf7\u8f93\u5165\u56e2\u961f\u63cf\u8ff0"}))),a.createElement(T.a.Item,{label:"\u6210\u5458"},n("members",{initialValue:e.orginInfo.members.map((function(e){return e.id}))})(a.createElement(L.a,{mode:"multiple",onSearch:o,filterOption:!1,notFoundContent:null,placeholder:"\u8bf7\u9009\u62e9\u6210\u5458"},e.userList.list.map((function(e){return a.createElement(B,{key:e.id,value:e.id},e.nickname||e.username)})))))))}));function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K=L.a.Option,M=T.a.create()((function(e){var t=e.form,n=t.getFieldDecorator,r=t.setFields,i=function(t){t&&t.preventDefault(),e.form.validateFields((function(t,n){t?Object(D.p)(t):e.onSubmit(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{page:1,pageSize:20}))}))};return a.createElement(T.a,{onSubmit:i,layout:"inline"},a.createElement(T.a.Item,null,n("relevance",{initialValue:+e.defaultValue.relevance})(a.createElement(L.a,{onChange:function(){r({name:""}),setTimeout((function(){i()}),0)},style:{width:100}},a.createElement(K,{value:1},"\u6211\u7684\u56e2\u961f"),a.createElement(K,{value:0},"\u6240\u6709\u56e2\u961f")))),a.createElement(T.a.Item,null,n("name",{initialValue:e.defaultValue.name})(a.createElement(_.a,{placeholder:"\u6839\u636e\u56e2\u961f\u540d\u79f0\u67e5\u8be2"}))))})),Q=n(35);t.default=Object(l.c)((function(e){var t=e.team,n=t.teamList,r=t.teamListLoading,a=t.teamListParam,i=e.app,o=i.userList;return{teamList:n,userInfo:i.userInfo,userList:o,teamListLoading:r,teamListParam:a}}),(function(e){return Object(s.b)({onGetTeamList:function(e){return c.C.request(e)},onGetUserList:function(e){return c.E.request(e)},onAddTeam:function(e){return c.f.request(e)},onDeleteTeam:function(e){return c.o.request(e)},onUpdateTeam:function(e){return c.N.request(e)}},e)}))((function(e){var t=e.onGetTeamList,n=e.teamList,i=(e.teamListLoading,e.onGetUserList),l=e.userList,c=e.onAddTeam,s=e.onDeleteTeam,f=e.onUpdateTeam,b=e.teamListParam,d=e.userInfo,v=a.useState(!1),y=Object(r.a)(v,2),E=y[0],O=y[1],g=a.useState(!1),h=Object(r.a)(g,2),j=h[0],k=h[1],w=a.useState({name:"",description:"",creator:{id:null,nickname:"",username:""},members:[],id:null,public:!1}),S=Object(r.a)(w,2),L=S[0],I=S[1];return a.createElement("div",{className:o.a.wrapper},a.createElement(U,{onSearchUser:i,userList:l,visible:E,onClose:O,onSubmit:c}),a.createElement(A,{orginInfo:L,onSearchUser:i,userList:l,visible:j,onClose:k,onSubmit:f}),a.createElement("div",{className:o.a.header},a.createElement("div",{className:"app-fl"},a.createElement(M,{defaultValue:b,onSubmit:t})),a.createElement(u.a,{type:"primary",className:"app-fr",onClick:function(){return O(!0)}},"\u65b0\u5efa\u56e2\u961f")),a.createElement(m.a,{className:o.a.itemList,itemLayout:"horizontal",dataSource:n.list,renderItem:function(e){return a.createElement(m.a.Item,{key:e.id,actions:d.id===e.creator.id&&[a.createElement("a",{key:"list-edit",onClick:function(){return I(e),void k(!0)}},a.createElement(p.a,{type:"form"}),"\u7f16\u8f91"),a.createElement(P,{key:"list-delete",onConfirm:function(){return s(e.id)},title:"\u56e2\u961f\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u8981\u5220\u9664?",okText:"\u5220\u9664",cancelText:"\u53d6\u6d88"},a.createElement("a",null,a.createElement(p.a,{type:"delete"}),"\u5220\u9664"))]},a.createElement(m.a.Item.Meta,{avatar:a.createElement(C.a,{info:e.creator}),title:a.createElement(Q.b,{to:V.o.teamInfo+"?teamId="+e.id},e.name),description:e.description}),a.createElement("div",{className:o.a.memberBox},e.members.map((function(e){return a.createElement(C.a,{key:e.id,size:"mini",color:"#999",info:e})}))))}}))}))},528:function(e,t,n){"use strict";var r=n(0),a=n(529),i=n.n(a),o=n(630);t.a=function(e){var t=e.info,n=e.size,a=void 0===n?"":n,l=e.color,c=void 0===l?null:l,s=t.nickname||t.username||"\u65e0\u540d",u=r.createElement("div",null,r.createElement("p",null,t.nickname||"\u533f\u540d"),r.createElement("p",null,t.username));return r.createElement(o.a,{placement:"bottom",content:u},r.createElement("div",{style:{background:c},className:i.a.wrapper+" "+i.a[a]},/^\w*$/.test(s)?s.substr(0,4):s.substr(-2)))}},529:function(e,t,n){e.exports={wrapper:"AvatarText_wrapper__G4Kdz",mini:"AvatarText_mini__NgFQ1"}}}]);
//# sourceMappingURL=13.48b44e11.chunk.js.map