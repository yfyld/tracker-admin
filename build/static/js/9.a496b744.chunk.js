(window["webpackJsonptracker-web"]=window["webpackJsonptracker-web"]||[]).push([[9],{1047:function(e,t,a){"use strict";var n=a(87),r=a(0),l=a(197),c=a(72),i=a(1039),o=a(1040),u=a(1187),s=a(23),m=a(1051),p=a.n(m),f=a(1186),d=l.a.Option;l.a.OptGroup;t.a=function(e){var t=e.fieldList,a=e.filterInfo,m=e.onChange,v=r.useState([]),E=Object(n.a)(v,2),y=E[0],O=E[1],g=function(e,n){var r=JSON.parse(JSON.stringify(a));r.filterValues[n].key=e,r.filterValues[n].type="equal",r.filterValues[n].value=[];var l=t.list.find((function(t){return t.value===e}));l&&O(l.recommend),m(r)},N=function(e,t){var n=JSON.parse(JSON.stringify(a));n.filterValues[t].type=e,n.filterValues[t].value="equal"===e||"notEqual"===e?[]:"between"===e?[null,null]:null,m(n)},_=function(e,t){var n=JSON.parse(JSON.stringify(a));n.filterValues[t].value=e,m(n)};return r.createElement("div",null,a.filterValues.length>0&&r.createElement("div",{className:p.a.wrapper},a.filterValues.length>1&&r.createElement("div",{className:p.a.type},r.createElement(c.a,{size:"small",onClick:function(){var e=JSON.parse(JSON.stringify(a));e.filterType="AND"===e.filterType?"OR":"AND",m(e)}},"AND"===a.filterType?"\u4e14":"\u6216"),r.createElement("div",{className:p.a.line})),r.createElement("div",{className:p.a.form},a.filterValues.map((function(e,n){return r.createElement(i.a,{gutter:16,key:e.id},r.createElement(o.a,{span:5},r.createElement(l.a,{value:e.key,onChange:function(e){return g(e,n)}},t.list.map((function(e){return r.createElement(d,{value:e.value,key:e.value},e.name)})))),r.createElement(o.a,{span:3},r.createElement(l.a,{value:e.type,onChange:function(e){return N(e,n)}},r.createElement(d,{value:"equal"},"\u7b49\u4e8e"),r.createElement(d,{value:"notEqual"},"\u4e0d\u7b49\u4e8e"),r.createElement(d,{value:"isSet"},"\u6709\u503c"),r.createElement(d,{value:"notSet"},"\u6ca1\u503c"),r.createElement(d,{value:"greater"},"\u5927\u4e8e"),r.createElement(d,{value:"less"},"\u5c0f\u4e8e"),r.createElement(d,{value:"between"},"\u533a\u95f4"),r.createElement(d,{value:"contain"},"\u5305\u542b"),r.createElement(d,{value:"notContain"},"\u4e0d\u5305\u542b"),r.createElement(d,{value:"isEmpty"},"\u4e3a\u7a7a"),r.createElement(d,{value:"isNotEmpty"},"\u4e0d\u4e3a\u7a7a"),r.createElement(d,{value:"rlike"},"\u6b63\u5219\u5339\u914d"),r.createElement(d,{value:"notrlike"},"\u6b63\u5219\u4e0d\u5339\u914d"))),"isEmpty"!==e.type&&"isNotEmpty"!==e.type&&"isSet"!==e.type&&"notSet"!==e.type&&"rlike"!==e.type&&"notrlike"!==e.type&&r.createElement(o.a,{span:8},"equal"===e.type||"notEqual"===e.type?r.createElement(l.a,{value:e.value,onChange:function(e){return _(e,n)},mode:"tags",style:{width:"100%"},tokenSeparators:[","]},y.map((function(e){return r.createElement(d,{key:e,value:e},e)}))):r.createElement(u.a,{value:e.value,dataSource:y,style:{width:"100%"},onChange:function(e){return _(e,n)}})),r.createElement(o.a,{span:1},r.createElement("div",{onClick:function(){return function(e){var t=JSON.parse(JSON.stringify(a));t.filterValues.splice(e,1),m(t)}(n)},className:"app-link "+p.a.close},r.createElement(s.a,{type:"minus-circle"}))))})))),r.createElement("a",{onClick:function(){var e=JSON.parse(JSON.stringify(a));e.filterValues.push({type:null,key:null,value:null,id:Object(f.a)()}),m(e)},className:p.a.add},r.createElement(s.a,{type:"plus-square"}),"\u6dfb\u52a0\u7b5b\u9009"))}},1049:function(e,t,a){e.exports={wrapper:"Indicator_wrapper__3B5qd",select:"Indicator_select__1kP-z",content:"Indicator_content__3-BaR",center:"Indicator_center__3Oax_",metadataBox:"Indicator_metadataBox__3wnAQ",active:"Indicator_active__1aD9o",filter:"Indicator_filter__lBazH"}},1050:function(e,t,a){"use strict";var n=a(53),r=a(87),l=a(0),c=a(197),i=a(1042),o=a(1039),u=a(1040),s=a(505),m=a(247),p=a(23),f=a(1049),d=a.n(f),v=a(68),E=a(65),y=a(1047),O=a(1186),g=a(6);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=c.a.Option,h=(c.a.OptGroup,i.a.Search);t.a=Object(v.c)((function(e){var t=e.metadata;return{activeMetadataList:t.activeMetadataList,activeMetadataListParams:t.activeMetadataListParams,tagList:t.tagList,fieldList:t.fieldList}}),(function(e){return Object(E.b)({onGetActiveMetadataList:function(e){return g.z.request(e)}},e)}))((function(e){var t=e.indicators,a=e.activeMetadataList,n=e.activeMetadataListParams,f=e.onChange,v=e.fieldList,E=e.hasType,g=e.addText,N=void 0===g?"+\u6dfb\u52a0\u6307\u6807":g,w=e.hasCustomName,S=void 0!==w&&w,j=e.type,P=void 0===j?null:j,k=e.tagList,C=e.onGetActiveMetadataList,A=l.useState(_({},n)),L=Object(r.a)(A,2),D=L[0],J=L[1];function V(e,a){var n=JSON.parse(JSON.stringify(t));n[a].metadataCode=e.code,n[a].metadataName=e.name,f(n,t[a])}function T(e,a){var n=JSON.parse(JSON.stringify(t));n[a].filter=e,f(n)}function I(e,a){var n=JSON.parse(JSON.stringify(t));n[a].type=e,f(n)}function F(e){C(e)}l.useEffect((function(){J(n)}),[n]);var q={name:"\u6240\u6709\u4e8b\u4ef6",code:"_ALL_METADATA"};return l.createElement("div",{className:d.a.wrapper},l.createElement("div",null,t.map((function(e,n){return l.createElement("div",{key:e.id},l.createElement(o.a,{className:d.a.item,gutter:10},l.createElement(u.a,{span:1},l.createElement("div",{className:d.a.center},l.createElement(s.a,{color:"gold"},n+1))),l.createElement(u.a,{span:3},l.createElement(m.a,{overlay:l.createElement("div",{className:d.a.content},l.createElement("div",{onClick:function(e){return e.stopPropagation()}},l.createElement(h,{placeholder:"\u641c\u7d22\u4e8b\u4ef6",value:D.name,onChange:function(e){return J(_({},D,{name:e.target.value}))},onSearch:function(e){return F(_({},D,{name:e}))},style:{width:200}}),"\xa0",l.createElement(c.a,{placeholder:"\u6839\u636e\u6807\u7b7e\u7b5b\u9009",style:{width:200},mode:"multiple",value:D.tags?D.tags.split(",").map((function(e){return Number(e)})):[],onChange:function(e){return F(_({},D,{tags:e.join(",")}))}},k.list.map((function(e){return l.createElement(b,{key:e.id,value:e.id},e.name)})))),l.createElement("div",{className:d.a.metadataBox},l.createElement("span",{onClick:function(){return V(q,n)},className:q.code===e.metadataCode?d.a.active:"",key:q.code},"\u6240\u6709\u4e8b\u4ef6"),a.list.filter((function(e){return!P||e.type===P})).map((function(t){return l.createElement("span",{onClick:function(){return V(t,n)},className:t.code===e.metadataCode?d.a.active:"",key:t.code},t.name)}))))},l.createElement(i.a,{value:e.metadataName,readOnly:!0,className:d.a.select}))),S&&l.createElement(u.a,{span:3},l.createElement(i.a,{defaultValue:e.customName,placeholder:"\u81ea\u5b9a\u4e49\u540d\u79f0",onBlur:function(e){return function(e,a){var n=JSON.parse(JSON.stringify(t));n[a].customName=e,f(n)}(e.target.value,n)}})),E&&l.createElement(l.Fragment,null,l.createElement(u.a,{span:1},l.createElement("div",{className:d.a.center},"\u7684")),l.createElement(u.a,{span:3},l.createElement(c.a,{onChange:function(e){return I(e,n)},value:e.type},l.createElement(b,{value:"PV"},"\u603b\u6b21\u6570"),l.createElement(b,{value:"UV"},"\u7528\u6237\u6570"),l.createElement(b,{value:"APV"},"\u4eba\u5747\u6b21\u6570"),l.createElement(b,{value:"DPV"},"\u65e5\u5747\u6b21\u6570"),l.createElement(b,{value:"DUV"},"\u65e5\u5747\u7528\u6237\u6570")))),t.length>1&&l.createElement(u.a,{span:1},l.createElement("div",{onClick:function(){return function(e){var a=JSON.parse(JSON.stringify(t));a.splice(e,1),f(a,t[e])}(n)},className:"app-link "+d.a.center},l.createElement(p.a,{type:"close"})))),l.createElement("div",{className:d.a.filter},l.createElement(y.a,{fieldList:v,filterInfo:e.filter,onChange:function(e){return T(e,n)}})))}))),l.createElement("a",{onClick:function(){var e=JSON.parse(JSON.stringify(t));e.push({metadataCode:"_ALL_METADATA",metadataName:"\u6240\u6709\u4e8b\u4ef6",type:"PV",id:Object(O.a)(),filter:{filterType:"AND",filterValues:[]}}),f(e)}},N))}))},1051:function(e,t,a){e.exports={wrapper:"Filter_wrapper__9rptJ",line:"Filter_line__eOPS4",type:"Filter_type__2GtXQ",form:"Filter_form__1lfK0",close:"Filter_close__1AZpi",add:"Filter_add__2YNj8"}},1052:function(e,t,a){"use strict";var n=a(334),r=a(53),l=a(87),c=a(0),i=a.n(c),o=a(1042),u=a(72),s=a(68),m=a(65),p=a(6),f=a(1053),d=a.n(f);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a=Object(s.c)((function(e){return{reportInfo:e.report.reportInfo}}),(function(e){return Object(m.b)({handleAddReport:function(e){return p.e.request(e)},handleUpdateReport:function(e){return p.gb.request(e)}},e)}))((function(e){var t=e.reportInfo,a=e.handleUpdateReport,r=e.handleAddReport,c=e.data,s=i.a.useState(t),m=Object(l.a)(s,2),p=m[0],f=m[1];i.a.useEffect((function(){f(t)}),[t]);return i.a.createElement("div",{className:d.a.wrapper},i.a.createElement("h2",{className:d.a.title},i.a.createElement(o.a,{type:"text",onChange:function(e){return f(E({},p,{name:e.target.value}))},value:p.name})),i.a.createElement("div",{className:d.a.btns},i.a.createElement(u.a,{type:"link",icon:"save",onClick:function(){"undefined"!==typeof t.id?a(E({id:null},p,{data:c})):r(E({},p,{data:c}))}},"\u4fdd\u5b58"),p.id&&i.a.createElement(u.a,{type:"link",icon:"save",onClick:function(){p.id;var e=Object(n.a)(p,["id"]);r(E({},e,{data:c}))}},"\u53e6\u5b58\u4e3a"),i.a.createElement(u.a,{type:"link",icon:"plus-circle",onClick:function(){}},"\u6dfb\u52a0\u5230")),i.a.createElement("div",{className:d.a.description},i.a.createElement(o.a,{onChange:function(e){return f(E({},p,{description:e.target.value}))},value:p.description})))}))},1053:function(e,t,a){e.exports={wrapper:"AnalyseHeader_wrapper__1r0g1",btns:"AnalyseHeader_btns__G6iwS",title:"AnalyseHeader_title__1X3LF",description:"AnalyseHeader_description__1fJOY"}},1059:function(e,t,a){"use strict";var n=a(0),r=a(197),l=a(1039),c=a(1040),i=a(1060),o=a.n(i),u=r.a.Option;r.a.OptGroup;t.a=function(e){var t=e.fieldList,a=e.dimension,i=e.onChange;return n.createElement("div",{className:o.a.wrapper},n.createElement(l.a,{className:o.a.item},n.createElement(c.a,{span:1},n.createElement("div",{className:o.a.center},"\u6309")),n.createElement(c.a,{span:3},n.createElement(r.a,{value:a,onChange:i},n.createElement(u,{value:""},"\u603b\u4f53"),t.list.map((function(e){return n.createElement(u,{value:e.value,key:e.value},e.name)})))),n.createElement(c.a,{span:1},n.createElement("div",{className:o.a.center},"\u67e5\u770b"))))}},1060:function(e,t,a){e.exports={wrapper:"Dimension_wrapper__Ew76P",center:"Dimension_center__1BCis"}},1132:function(e,t,a){e.exports={ruleTitle:"AnalyseFunnel_ruleTitle__3gwQF",preview:"AnalyseFunnel_preview__18PLM",wrapper:"AnalyseFunnel_wrapper__29QoJ",ruleSection:"AnalyseFunnel_ruleSection__3K-yu"}},1167:function(e,t,a){"use strict";a.r(t);var n=a(53),r=a(197),l=a(1174),c=a(1042),i=a(1039),o=a(1040),u=a(72),s=a(342),m=a(0),p=a.n(m),f=a(333),d=a(1132),v=a.n(d),E=a(1050),y=a(1059),O=a(1047),g=a(1052),N=a(68),_=a(65),b=a(6),h=a(489);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=r.a.Option,P=(l.a.Panel,c.a.Group);t.default=Object(N.c)((function(e){var t=e.metadata.fieldList,a=e.project.projectInfo.id,n=e.analyse;return{fieldList:t,projectId:a,funnelAnalyseData:n.funnelAnalyseData,funnelAnalyseParam:n.funnelAnalyseParam,analyseLoading:n.analyseLoading}}),(function(e){return Object(_.b)({onGetFunnelAnalyseData:function(e){return b.E.request(e)}},e)}))((function(e){var t=e.analyseLoading,a=e.fieldList,n=e.onGetFunnelAnalyseData,l=e.projectId,c=e.funnelAnalyseData,m=e.funnelAnalyseParam,d=function(e){e.projectId=l,n(e)};return p.a.createElement("div",{className:v.a.wrapper},p.a.createElement(g.a,{data:S({},m,{projectId:l})}),p.a.createElement("div",{className:v.a.rule},p.a.createElement("div",{className:v.a.ruleSection},p.a.createElement("span",{className:v.a.ruleTitle},"\u6307\u6807:"),p.a.createElement(r.a,{value:m.indicatorType,onChange:function(e){return d(S({},m,{indicatorType:e}))}},p.a.createElement(j,{value:"PV"},"\u603b\u6570"),p.a.createElement(j,{value:"UV"}," \u7528\u6237\u6570"),p.a.createElement(j,{value:"APV"},"\u4eba\u5747\u6b21\u6570"),p.a.createElement(j,{value:"DPV"},"\u65e5\u5747\u6b21\u6570"),p.a.createElement(j,{value:"DUV"},"\u65e5\u5747\u7528\u6237\u6570"))),p.a.createElement("div",{className:v.a.ruleSection},p.a.createElement("span",{className:v.a.ruleTitle},"\u7eac\u5ea6:"),p.a.createElement(y.a,{dimension:m.dimension,fieldList:a,onChange:function(e){return d(S({},m,{dimension:e}))}})),p.a.createElement("div",{className:v.a.ruleSection},p.a.createElement("span",{className:v.a.ruleTitle},"\u7b5b\u9009:"),p.a.createElement(O.a,{fieldList:a,filterInfo:m.filter,onChange:function(e){return d(S({},m,{filter:e}))}})),p.a.createElement("div",{className:v.a.ruleSection},p.a.createElement("span",{className:v.a.ruleTitle},"\u6f0f\u6597\u6b65\u9aa4:"),p.a.createElement(E.a,{addText:"+\u6dfb\u52a0\u6b65\u9aa4",hasCustomName:!0,indicators:m.indicators,onChange:function(e){return d(S({},m,{indicators:e}))}}))),p.a.createElement("div",{className:v.a.preview},p.a.createElement(i.a,null,p.a.createElement(o.a,{span:14},p.a.createElement(f.a,{onChange:function(e){return d(S({},m,{},e))},value:{dateType:m.dateType,dateEnd:m.dateEnd,dateStart:m.dateStart}})),p.a.createElement(o.a,{span:6,offset:4},p.a.createElement(P,{compact:!0},p.a.createElement(r.a,{style:{width:"33%"},value:m.type,onChange:function(e){return d(S({},m,{type:e}))}},p.a.createElement(j,{value:"FUNNEL"},"\u6f0f\u6597\u56fe"),p.a.createElement(j,{value:"LIST"},"\u5217\u8868"),p.a.createElement(j,{value:"TABLE"},"\u8868\u683c")),p.a.createElement(u.a,{icon:"download"},"\u5bfc\u51fa")))),p.a.createElement(s.a,{spinning:t},p.a.createElement(h.a,{data:c}))))}))}}]);
//# sourceMappingURL=9.a496b744.chunk.js.map