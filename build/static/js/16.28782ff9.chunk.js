(window["webpackJsonptracker-web"]=window["webpackJsonptracker-web"]||[]).push([[16],{1062:function(e,t,n){"use strict";var r=n(1046),a=n(1090),o=n(1045),i=n(0),c=n(7),l=n(57);t.a=o.a.create()((function(e){e.form.getFieldDecorator;i.useEffect((function(){e.form.resetFields()}),[e.visible]);var t={width:"25%","text-align":"center",padding:0},n={display:"block",height:"100%",padding:24};return i.createElement(r.a,{onOk:function(t){t.preventDefault(),e.form.validateFields((function(t,n){t?Object(c.v)(t):e.onClose(!1)}))},title:"\u65b0\u589e\u62a5\u8868",visible:e.visible,onCancel:function(){return e.onClose(!1)}},i.createElement(a.a,null,i.createElement(a.a.Grid,{style:t},i.createElement(l.b,{style:n,to:Object(c.c)("EVENT",e.projectId)},"\u4e8b\u4ef6\u5206\u6790")),i.createElement(a.a.Grid,{style:t},i.createElement(l.b,{style:n,to:Object(c.c)("FUNNEL",e.projectId)},"\u6f0f\u6597\u5206\u6790")),i.createElement(a.a.Grid,{style:t},i.createElement(l.b,{style:n,to:Object(c.c)("PATH",e.projectId)},"\u8def\u5f84\u5206\u6790")),i.createElement(a.a.Grid,{style:t},i.createElement(l.b,{style:n,to:Object(c.c)("EVENT",e.projectId)},"\u7528\u6237\u5206\u6790"))))}))},1137:function(e,t,n){e.exports={wrapper:"Board_wrapper__15SDx",header:"Board_header__2PFEu",title:"Board_title__2Fv8C",btnBox:"Board_btnBox__3fBSB",addRportMenu:"Board_addRportMenu__nS7OX"}},1138:function(e,t,n){e.exports={wrapper:"ReportDrawerContent_wrapper__3fPcI"}},1379:function(e,t,n){"use strict";n.r(t);var r=n(48),a=n(81),o=n(323),i=n.n(o),c=n(0),l=n(490),u=n(68),s=n(1137),d=n.n(s),p=n(65),m=n(1046),f=n(72),b=n(510),E=n(1376),v=n(1061),y=n(5),O=n(1138),j=n.n(O),g=n(1043),I=n(1360),h=n(57),S=g.a.Search,w=function(e){var t=e.reportList,n=e.onSearch,r=e.name,o=e.onSubmit,i=e.boardId,l=c.useState({id:null,name:"",description:"",projectId:null,type:"",data:"{}",dateType:null}),u=Object(a.a)(l,2),s=(u[0],u[1],c.useState(!1)),d=Object(a.a)(s,2);d[0],d[1];return c.createElement("div",{className:j.a.wrapper},c.createElement(S,{placeholder:"\u8f93\u5165\u62a5\u8868\u540d\u79f0",defaultValue:r,onSearch:n,style:{width:200}}),c.createElement(I.a,{itemLayout:"horizontal",dataSource:t.list.filter((function(e){return!e.boards.find((function(e){return e.id===i}))})),renderItem:function(e){return c.createElement(I.a.Item,{actions:[c.createElement("a",{onClick:function(){var t;o({projectId:(t=e).projectId,reportId:t.id,boardIds:[i]})},key:"list-loadmore-edit"},"\u6dfb\u52a0")]},c.createElement(I.a.Item.Meta,{title:c.createElement(h.b,{to:"/project/2/analyse-event/2"},e.name),description:e.description}))}}))},P=n(335),C=n(199),D=n(1045),k=n(10),N=n(7);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=C.a.Option,T=D.a.create()((function(e){var t=e.form.getFieldDecorator;c.useEffect((function(){e.form.resetFields()}),[e.visible]);return c.createElement(m.a,{onOk:function(t){t.preventDefault(),e.form.validateFields((function(t,n){t?Object(N.v)(t):(e.onSubmit(_({id:e.orginInfo.id},e.orginInfo,{name:n.name,description:n.description,data:_({},e.orginInfo.data,{},n.time,{type:n.type,timeUnit:n.timeUnit})})),e.onClose(!1))}))},title:"\u5feb\u6377\u8bbe\u7f6e",visible:e.visible,onCancel:function(){return e.onClose(!1)}},c.createElement(D.a,Object.assign({layout:"horizontal"},k.fb),c.createElement(D.a.Item,{label:"\u62a5\u8868\u540d\u79f0"},t("name",{initialValue:e.orginInfo.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u62a5\u8868\u540d\u79f0"}]})(c.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u8868\u540d\u79f0"}))),c.createElement(D.a.Item,{label:"\u663e\u793a\u65b9\u5f0f"},t("type",{initialValue:e.orginInfo.data.type,rules:[{required:!0,message:"\u9009\u62e9\u663e\u793a\u65b9\u5f0f"}]})(c.createElement(C.a,{style:{width:120}},c.createElement(L,{value:"LINE"},"\u7ebf\u56fe"),c.createElement(L,{value:"BAR"},"\u67f1\u72b6\u56fe"),c.createElement(L,{value:"PIE"},"\u997c\u56fe"),c.createElement(L,{value:"FUNNEL"},"\u6f0f\u6597\u56fe"),c.createElement(L,{value:"LIST"},"\u5217\u8868"),c.createElement(L,{value:"TABLE"},"\u8868\u683c"),c.createElement(L,{value:"TEXT"},"\u6570\u503c")))),c.createElement(D.a.Item,{label:"\u65f6\u95f4\u8303\u56f4"},t("time",{initialValue:{dateStart:Number(e.orginInfo.dateStart),dateEnd:Number(e.orginInfo.dateEnd),dateType:e.orginInfo.dateType}})(c.createElement(P.a,{pickerProps:{allowClear:!1}}))),c.createElement(D.a.Item,{label:"\u65f6\u95f4\u7eac\u5ea6"},t("timeUnit",{initialValue:e.orginInfo.data.timeUnit})(c.createElement(C.a,{style:{width:120}},c.createElement(L,{value:"HOUR"},"\u6309\u5c0f\u65f6"),c.createElement(L,{value:"DAY"},"\u6309\u5929"),c.createElement(L,{value:"WEEK"},"\u6309\u5468"),c.createElement(L,{value:"MONTH"},"\u6309\u6708"),c.createElement(L,{value:"YEAR"},"\u6309\u5e74")))),c.createElement(D.a.Item,{label:"\u62a5\u8868\u63cf\u8ff0"},t("description",{initialValue:e.orginInfo.description})(c.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u8868\u63cf\u8ff0"})))))})),R=n(1062),x=n(23),F=function(e){var t=e.value,n=e.onChange,r=c.useState(!1),o=Object(a.a)(r,2),i=o[0],l=o[1],u=c.useState(t),s=Object(a.a)(u,2),d=s[0],p=s[1];c.useEffect((function(){p(t)}),[t]);var m=function(){l(!1),t!==d&&n(d)};return c.createElement("div",{style:{display:"inline-block"}},i?c.createElement(g.a,{className:"app-no-border-input",autoFocus:!0,style:{width:500},type:"text",onChange:function(e){return p(e.target.value)},value:d,onBlur:m,onPressEnter:m}):c.createElement("h2",{style:{fontSize:16,lineHeight:"32px",margin:0}},t,"\xa0",c.createElement(x.a,{type:"edit",onClick:function(){return l(!0)}})))};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=m.a.confirm,V=f.a.Group,q=i.a.WidthProvider(i.a);t.default=Object(u.c)((function(e){var t=e.board,n=t.boardInfo,r=t.globalDate,a=e.report;return{reportList:a.reportList,boardInfo:n,reportListParams:a.reportListParams,globalDate:r}}),(function(e){return Object(p.b)({onSave:function(e){return y.hb.request(e)},onChangeBoardGlobalDate:function(e){return Object(y.j)(e)},onAppendReportToBoard:function(e){return y.i.request(e)},onUpdateReport:function(e){return y.mb.request(e)},onGetReportList:function(e){return y.P.request(e)},onDeleteBoard:function(e){return y.n.request(e)}},e)}))((function(e){var t=e.reportList,n=e.boardInfo,o=e.onSave,i=e.globalDate,u=e.reportListParams,s=e.onGetReportList,p=e.onAppendReportToBoard,m=e.onChangeBoardGlobalDate,y=e.onDeleteBoard,O=e.onUpdateReport,j=c.useState(!1),g=Object(a.a)(j,2),I=g[0],h=g[1],S=c.useState(1),C=Object(a.a)(S,2),D=C[0],k=C[1],N=c.useState(!1),B=Object(a.a)(N,2),_=B[0],L=B[1],x=c.useState(null),A=Object(a.a)(x,2),J=A[0],z=A[1],H=c.useState(!1),M=Object(a.a)(H,2),W=M[0],X=M[1],Y=c.useState(n.layout),K=Object(a.a)(Y,2),Q=K[0],Z=K[1];c.useEffect((function(){Z(n.layout)}),[n]);var $=function(e){var t=JSON.parse(JSON.stringify(n)),r=t.reports.findIndex((function(t){return t.id===e}));r>=0&&(t.reports.splice(r,1),o(t))};var ee=c.createElement("div",{className:d.a.addRportMenu},c.createElement("div",{onClick:function(){0===t.list.length&&s({page:1,pageSize:100,projectId:n.projectId}),h(!0)}},"\u6dfb\u52a0\u5df2\u6709\u62a5\u8868"),c.createElement("div",{onClick:function(){X(!0)}},"\u65b0\u589e\u62a5\u8868"));function te(e){L(!0),z(e)}return c.createElement("div",{className:d.a.wrapper},c.createElement(R.a,{projectId:n.projectId,visible:W,onClose:X}),J&&c.createElement(T,{orginInfo:J,visible:_,onClose:L,onSubmit:function(e){O(e)}}),c.createElement(E.a,{title:"\u62a5\u8868\u5217\u8868",width:300,placement:"right",closable:!1,onClose:function(){return h(!1)},visible:I},c.createElement(w,{onSearch:function(e){return s({page:1,pageSize:100,projectId:n.projectId,name:e})},reportList:t,name:u.name,boardId:n.id,onSubmit:function(e){p(e),h(!1)}})),c.createElement("div",{className:d.a.header},c.createElement(F,{value:n.name,onChange:function(e){return o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{name:e}))}}),c.createElement("div",{className:d.a.btnBox},c.createElement(P.a,{defalutShowIcon:!0,value:i,onChange:m}),"\xa0",c.createElement(V,null,c.createElement(f.a,{icon:"save",onClick:function(){var e=n.id,t=n.projectId;JSON.stringify(Q)!==JSON.stringify(n.layout)?o({id:e,projectId:t,layout:Q}):b.a.info("\u5f53\u524d\u5e03\u5c40\u672a\u4fee\u6539")}}),c.createElement(f.a,{icon:"delete",onClick:function(){var e=n.id,t=n.projectId;U({title:"\u63d0\u793a",content:"\u786e\u8ba4\u5220\u9664\u8be5\u770b\u677f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){y({id:e,projectId:t})}})}}),c.createElement(f.a,{icon:"reload",onClick:function(){return k(D+1)}}),c.createElement(v.a,{placement:"bottom",content:ee,title:"\u6dfb\u52a0\u62a5\u8868"},c.createElement(f.a,{type:"primary",icon:"plus"}))))),c.createElement("div",{className:d.a.main},c.createElement(q,{key:n.id,className:"layout",layout:Q,onLayoutChange:function(e){Z(e)},cols:24,rowHeight:30},function(e){return e.map((function(e){return c.createElement("div",{key:e.id},c.createElement(l.a,{onSetPane:te,refresh:D,globalDate:i,reportInfo:e,onDeletePane:$}))}))}(n.reports))))}))}}]);
//# sourceMappingURL=16.28782ff9.chunk.js.map