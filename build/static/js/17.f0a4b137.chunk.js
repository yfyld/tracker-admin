(window["webpackJsonptracker-web"]=window["webpackJsonptracker-web"]||[]).push([[17],{1048:function(e,t,n){"use strict";function r(e,t,n,r,a,l,o){try{var i=e[l](o),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,l){var o=e.apply(t,n);function i(e){r(o,a,l,i,c,"next",e)}function c(e){r(o,a,l,i,c,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return a}))},1082:function(e,t,n){"use strict";var r=n(0),a=n(16),l=n(334),o=n(22),i=n(72),c=n(64),s=n(124),u=n(112);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},E=function(e){function t(e){var n,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=b(t).call(this,e),(n=!o||"object"!==m(o)&&"function"!==typeof o?d(a):o).onConfirm=function(e){n.setVisible(!1,e);var t=n.props.onConfirm;t&&t.call(d(n),e)},n.onCancel=function(e){n.setVisible(!1,e);var t=n.props.onCancel;t&&t.call(d(n),e)},n.onVisibleChange=function(e){n.props.disabled||n.setVisible(e)},n.saveTooltip=function(e){n.tooltip=e},n.renderOverlay=function(e,t){var a=n.props,l=a.okButtonProps,o=a.cancelButtonProps,c=a.title,s=a.cancelText,u=a.okText,m=a.okType,p=a.icon;return r.createElement("div",null,r.createElement("div",{className:"".concat(e,"-inner-content")},r.createElement("div",{className:"".concat(e,"-message")},p,r.createElement("div",{className:"".concat(e,"-message-title")},c)),r.createElement("div",{className:"".concat(e,"-buttons")},r.createElement(i.a,f({onClick:n.onCancel,size:"small"},o),s||t.cancelText),r.createElement(i.a,f({onClick:n.onConfirm,type:m,size:"small"},l),u||t.okText))))},n.renderConfirm=function(e){var t=e.getPrefixCls,a=n.props,o=a.prefixCls,i=a.placement,u=y(a,["prefixCls","placement"]),m=t("popover",o),p=r.createElement(c.a,{componentName:"Popconfirm",defaultLocale:s.a.Popconfirm},(function(e){return n.renderOverlay(m,e)}));return r.createElement(l.a,f({},u,{prefixCls:m,placement:i,onVisibleChange:n.onVisibleChange,visible:n.state.visible,overlay:p,ref:n.saveTooltip}))},n.state={visible:e.visible},n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,o=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}],(a=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var n=this.props;"visible"in n||this.setState({visible:e});var r=n.onVisibleChange;r&&r(e,t)}},{key:"render",value:function(){return r.createElement(u.a,null,this.renderConfirm)}}])&&p(n.prototype,a),o&&p(n,o),t}(r.Component);E.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:r.createElement(o.a,{type:"exclamation-circle",theme:"filled"}),disabled:!1},Object(a.polyfill)(E),t.a=E},1166:function(e,t,n){e.exports={wrapper:"UserManage_wrapper__3Tftf",header:"UserManage_header__2Xyv_",listBox:"UserManage_listBox__1YIsf",table:"UserManage_table__3WJCh",submitButtons:"UserManage_submitButtons__1k7Tr",rightBtn:"UserManage_rightBtn__23RIN"}},1190:function(e,t,n){"use strict";n.r(t);var r=n(81),a=n(0),l=n(68),o=n(65),i=n(1047),c=n(72),s=n(1082),u=n(1041),m=n(1042),f=n(1046),p=n(1044),b=n(1040),d=n(5),v=n(10),y=n(7),E=Object(l.c)(null,(function(e){return Object(o.b)({handleAddUser:function(e){return d.fb.request(e)}},e)}))(f.a.create()((function(e){var t=e.form.getFieldDecorator;a.useEffect((function(){e.form.resetFields()}),[e.visible]);return a.createElement(i.a,{onOk:function(t){t.preventDefault(),e.form.validateFields((function(t,n){t?Object(y.v)(t):(e.handleAddUser(n),e.onClose(!1))}))},title:"\u65b0\u5efa\u7528\u6237",visible:e.visible,onCancel:function(){return e.onClose(!1)}},a.createElement(f.a,Object.assign({layout:"horizontal"},v.cb),a.createElement(f.a.Item,{label:"\u7528\u6237\u540d"},t("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),a.createElement(f.a.Item,{label:"\u6635\u79f0"},t("nickname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6635\u79f0"}]})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u6635\u79f0"}))),a.createElement(f.a.Item,{label:"email"},t("email",{})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165Email"}))),a.createElement(f.a.Item,{label:"\u624b\u673a\u53f7"},t("mobile",{})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),a.createElement(f.a.Item,{label:"\u5bc6\u7801"},t("password",{})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))))}))),O=n(1166),h=n.n(O),g=n(8),j=n.n(g),k=n(48),w=n(1048),C=n(173);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=Object(l.c)((function(e){return{allRoleList:e.role.allRoleList}}),(function(e){return Object(o.b)({onPutUserByAdmin:function(e){return d.db.request(e)}},e)}))(f.a.create()((function(e){var t=e.form.getFieldDecorator;a.useEffect((function(){e.form.resetFields()}),[e.visible]);var n=e.allRoleList.list.map((function(e){return{label:e.name,value:e.id,disabled:!e.status,type:e.type}}));return a.createElement(i.a,{onOk:function(t){t.preventDefault(),e.form.validateFields(function(){var t=Object(w.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return Object(y.v)(n),t.abrupt("return");case 3:r.username=Object(y.w)(r.username),r.nickname=Object(y.w)(r.nickname),e.onPutUserByAdmin(P({},e.userInfo,{},r)),e.onClose(!1);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},title:"\u7f16\u8f91\u7528\u6237",visible:e.visible,onCancel:function(){return e.onClose(!1)}},a.createElement(f.a,Object.assign({layout:"horizontal"},v.cb),a.createElement(f.a.Item,{label:"\u7528\u6237\u540d"},t("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],initialValue:e.userInfo.username})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",disabled:!0}))),a.createElement(f.a.Item,{label:"\u6635\u79f0"},t("nickname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6635\u79f0"}],initialValue:e.userInfo.nickname})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u6635\u79f0"}))),a.createElement(f.a.Item,{label:"Email"},t("email",{rules:[{message:"\u8bf7\u8f93\u5165Email"}],initialValue:e.userInfo.email})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237Email"}))),a.createElement(f.a.Item,{label:"\u624b\u673a\u53f7"},t("mobile",{rules:[{message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}],initialValue:e.userInfo.mobile})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}))),a.createElement(f.a.Item,{label:"\u89d2\u8272"},t("roleIds",{rules:[{required:!0,message:"\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u89d2\u8272"}],initialValue:e.userInfo.roles.map((function(e){return e.id}))})(a.createElement(C.a.Group,{options:n})))))})));i.a.confirm,t.default=Object(l.c)((function(e){var t=e.app;return{userInfo:t.userInfo,userList:t.userList}}),(function(e){return Object(o.b)({onGetUserList:function(e){return d.V.request(e)},onEditUser:function(e){return Object(d.z)(e)},onGetUserRoles:function(e){return d.W.request(e)},onDeleteUser:function(e){return d.v.request(e)}},e)}))(f.a.create()((function(e){var t=e.form.getFieldDecorator,n=a.useState(!1),l=Object(r.a)(n,2),o=l[0],i=l[1],d=a.useState(!1),O=Object(r.a)(d,2),g=(O[0],O[1],a.useState(null)),j=Object(r.a)(g,2),k=j[0],w=j[1],C=a.useState(!1),I=Object(r.a)(C,2),P=I[0],x=I[1],S=[{key:"username",title:"\u7528\u6237\u540d",dataIndex:"username"},{key:"nickname",title:"\u6635\u79f0",dataIndex:"nickname"},{key:"email",title:"Email",dataIndex:"email"},{key:"mobile",title:"\u624b\u673a\u53f7",dataIndex:"mobile"},{key:"role",title:"\u89d2\u8272",dataIndex:"roles",render:function(e,t){return a.createElement("div",null,t.roles.map((function(e){return e.name})).join(","))}},{title:"\u64cd\u4f5c",key:"action",width:200,render:function(t,n){return a.createElement("span",null,a.createElement(c.a,{type:"link",size:"small",onClick:function(){w(n),x(!0)}},"\u7f16\u8f91"),a.createElement(s.a,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.onDeleteUser(n.id)}},a.createElement(c.a,{type:"link",size:"small"},"\u5220\u9664")))}}];return a.createElement("div",{className:h.a.wrapper},a.createElement(u.a,{gutter:24},a.createElement(m.a,null,a.createElement(u.a,null,a.createElement(f.a,Object.assign({layout:"horizontal"},v.cb),a.createElement(m.a,{span:6},a.createElement(f.a.Item,{label:"\u7528\u6237\u540d"},t("username",{initialValue:e.userInfo.username})(a.createElement(p.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d/\u89d2\u8272\u7801"}))))),a.createElement(m.a,{span:4},a.createElement("span",{className:h.a.submitButtons},a.createElement(c.a,{type:"primary",onClick:function(t){t.preventDefault(),e.form.validateFields((function(t,n){t?Object(y.v)(t):(n.username=Object(y.w)(n.username),e.onGetUserList(n))}))}},"\u67e5\u8be2"))),a.createElement(m.a,{span:14},a.createElement(E,{visible:o,onClose:i}),k&&a.createElement(_,{visible:P,userInfo:k,onClose:x}),a.createElement("div",{className:h.a.rightBtn},a.createElement(c.a,{type:"primary",onClick:function(){return i(!0)}},"\u65b0\u5efa\u7528\u6237")))))),a.createElement("div",{className:h.a.table},a.createElement(b.a,{rowKey:"id",columns:S,dataSource:e.userList.list})))})))}}]);
//# sourceMappingURL=17.f0a4b137.chunk.js.map