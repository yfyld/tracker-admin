{"version":3,"sources":["components/Indicator.tsx","components/Dimension.tsx","components/Filter.tsx","pages/analyse/components/AnalyseHeader.tsx","pages/analyse/AnalyseEvent.tsx","components/AnalyseRangePicker.tsx","pages/analyse/AnalyseEvent.module.less","components/Indicator.module.less","components/Dimension.module.less","components/Filter.module.less","pages/analyse/components/AnalyseHeader.module.less"],"names":["Option","Select","Search","OptGroup","Input","connect","state","metadata","activeMetadataList","activeMetadataListParams","dispatch","bindActionCreators","indicators","index","React","id","name","code","type","description","status","projectId","tags","target","indicatorInfo","setindicatorInfo","content","className","style","onClick","e","stopPropagation","placeholder","onSearch","value","console","log","width","metadataBox","list","map","item","key","wrapper","span","center","color","overlay","readOnly","select","onChange","Dimension","label","Filter","gutter","checkedChildren","unCheckedChildren","defaultChecked","mode","tokenSeparators","handleAddReport","params","doAddReport","request","handleUpdateReport","doUpdateReport","reportInfo","title","defaultValue","btns","icon","Panel","Collapse","Group","options","xAxis","data","yAxis","series","dates","report","useState","newInfo","defaultActiveKey","header","ruleTitle","AnalyseRangePicker","moment","compact","option","notMerge","lazyUpdate","RangePicker","DatePicker","renderExtraFooter","format","this","props","module","exports"],"mappings":"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","file":"static/js/16.8b82fcb6.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Tag, Select, Row, Col, Icon, Popover, Input, Dropdown, Divider } from 'antd';\nimport style from './Indicator.module.less';\nimport { IMetadataInfo, IMetadataListParam } from '@/api';\nimport { IPageData, IAction, IStoreState } from '@/types';\nimport { connect } from 'react-redux';\n\nimport { bindActionCreators, Dispatch } from 'redux';\nconst { Option, OptGroup } = Select;\n\nconst { Search } = Input;\n\ninterface IndicatorItem {\n  event?: string;\n}\n\ninterface Props {\n  indicators?: IndicatorItem[];\n  activeMetadataList: IPageData<IMetadataInfo>;\n  activeMetadataListParams: IMetadataListParam;\n  index?: number;\n}\n\nconst Indicator = ({ indicators, activeMetadataList, activeMetadataListParams, index = 0 }: Props) => {\n  const [indicatorInfo, setindicatorInfo] = React.useState<{ target: string; metadata: IMetadataInfo }>({\n    metadata: {\n      id: null,\n      name: null,\n      code: null,\n      type: null,\n      description: null,\n      status: null,\n      projectId: null,\n      tags: []\n    },\n    target: '1'\n  });\n  function handleSelectMetadata(info: IMetadataInfo) {\n    setindicatorInfo({\n      ...indicatorInfo,\n      metadata: info\n    });\n  }\n\n  function handleTargetChange(value: string) {\n    setindicatorInfo({\n      ...indicatorInfo,\n      target: value\n    });\n  }\n\n  const content = (\n    <div className={style.content}>\n      <div onClick={e => e.stopPropagation()}>\n        <Search placeholder='搜索事件' onSearch={value => console.log(value)} style={{ width: 200 }} />\n        <Select style={{ width: 200 }}>\n          <Option value='1'>标签1</Option>\n          <Option value='2'>标签2</Option>\n          <Option value='3'>标签3</Option>\n        </Select>\n      </div>\n\n      <div className={style.metadataBox}>\n        {activeMetadataList.list.map(item => (\n          <span onClick={() => handleSelectMetadata(item)} className='app-pointer' key={item.code}>\n            {item.name}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className={style.wrapper}>\n      <Row className={style.item}>\n        <Col span={1}>\n          <div className={style.center}>\n            <Tag color='gold'>{index + 1}</Tag>\n          </div>\n        </Col>\n        <Col span={3}>\n          <Dropdown overlay={content}>\n            <Input value={indicatorInfo.metadata.name} readOnly className={style.select} />\n          </Dropdown>\n        </Col>\n        <Col span={1}>\n          <div className={style.center}>的</div>\n        </Col>\n        <Col span={3}>\n          <Select onChange={handleTargetChange} value={indicatorInfo.target}>\n            <Option value='1'>总次数</Option>\n            <Option value='2'>用户数</Option>\n            <Option value='3'>人均次数</Option>\n          </Select>\n        </Col>\n\n        {!!index && (\n          <Col span={1}>\n            <div className={'app-link ' + style.center}>\n              <Icon type='close' />\n            </div>\n          </Col>\n        )}\n      </Row>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: IStoreState) => {\n  const { activeMetadataList, activeMetadataListParams } = state.metadata;\n  return {\n    activeMetadataList,\n    activeMetadataListParams\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch<IAction>) => bindActionCreators({}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Indicator);\n","import * as React from 'react';\nimport { Select, Row, Col, Icon } from 'antd';\nimport style from './Dimension.module.less';\nconst { Option, OptGroup } = Select;\n\nconst Dimension = () => {\n  return (\n    <div className={style.wrapper}>\n      {[1].map(item => (\n        <Row className={style.item}>\n          <Col span={1}>\n            <div className={style.center}>按</div>\n          </Col>\n          <Col span={3}>\n            <Select>\n              <OptGroup label='事件属性'>\n                <Option value='1'>总次数</Option>\n                <Option value='2'>用户数</Option>\n                <Option value='3'>国家</Option>\n                <Option value='4'>操作系统</Option>\n              </OptGroup>\n              <OptGroup label='用户属性'>\n                <Option value='Yiminghe'>yiminghe</Option>\n              </OptGroup>\n            </Select>\n          </Col>\n          <Col span={1}>\n            <div className={style.center}>查看</div>\n          </Col>\n          <Col span={1}>\n            <div className={'app-link ' + style.center}>\n              <Icon type='close' />\n            </div>\n          </Col>\n        </Row>\n      ))}\n    </div>\n  );\n};\n\nexport default Dimension;\n","import * as React from 'react';\nimport { Select, Row, Col, Icon, Input, Switch } from 'antd';\nimport style from './Filter.module.less';\nconst { Option, OptGroup } = Select;\n\nconst Filter = () => {\n  return (\n    <div className={style.wrapper}>\n      <Row gutter={16} className={style.item}>\n        <Col span={1}>\n          <Switch checkedChildren='且' unCheckedChildren='或' defaultChecked />\n        </Col>\n        <Col span={3}>\n          <Select>\n            <OptGroup label='事件属性'>\n              <Option key='1' value='1'>\n                总次数\n              </Option>\n              <Option key='2' value='2'>\n                用户数\n              </Option>\n              <Option key='3' value='3'>\n                国家\n              </Option>\n              <Option key='4' value='4'>\n                操作系统\n              </Option>\n            </OptGroup>\n            <OptGroup label='自定义属性'></OptGroup>\n            {/* <OptGroup label='用户属性'>\n              <Option key='5' value='Yiminghe'>\n                yiminghe\n              </Option>\n            </OptGroup> */}\n          </Select>\n        </Col>\n        <Col span={3}>\n          <Select>\n            <Option value='equal'>等于</Option>\n            <Option value='notEqual'>不等于</Option>\n            <Option value='isSet'>有值</Option>\n            <Option value='notSet'>没值</Option>\n\n            <Option value='greater'>大于</Option>\n            <Option value='less'>小于</Option>\n            <Option value='between'>区间</Option>\n\n            <Option value='contain'>包含</Option>\n            <Option value='notContain'>不包含</Option>\n            <Option value='isEmpty'>为空</Option>\n            <Option value='isNotEmpty'>不为空</Option>\n            <Option value='rlike'>正则匹配</Option>\n            <Option value='notrlike'>正则不匹配</Option>\n          </Select>\n        </Col>\n        <Col span={8}>\n          <Select mode='tags' style={{ width: '100%' }} tokenSeparators={[',']}>\n            <Option value='aaa'>aaa</Option>\n          </Select>\n        </Col>\n        <Col span={1}>\n          <div className={'app-link ' + style.center}>\n            <Icon type='close' />\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\nimport { Icon, Button, Input } from 'antd';\nimport { connect } from 'react-redux';\nimport { IAction, IStoreState } from '@/types';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { doAddReport, doUpdateReport } from '@/store/actions';\nimport { IReportAddParam, IReportUpdateParam, IReportInfo } from '@/api';\nimport style from './AnalyseHeader.module.less';\ninterface Props {\n  reportInfo: IReportInfo;\n  handleAddReport: (params: IReportAddParam) => IAction;\n  handleUpdateReport: (params: IReportUpdateParam) => IAction;\n  //handleAppandBoard: (params: any) => IAction;\n}\nconst AnalyseHeader = ({ reportInfo, handleUpdateReport, handleAddReport }: Props) => {\n  const handleSave = () => {\n    if (typeof reportInfo.id !== 'undefined') {\n      handleUpdateReport({ id: null, ...reportInfo });\n    } else {\n      handleAddReport(reportInfo);\n    }\n  };\n\n  const handleSaveAs = () => {\n    handleAddReport(reportInfo);\n  };\n\n  const handleAppand = () => {\n    //handleAppandBoard(reportInfo);\n  };\n  return (\n    <div className={style.wrapper}>\n      <h2 className={style.title}>\n        <Input type='text' defaultValue={reportInfo.name} />\n      </h2>\n      <div className={style.btns}>\n        <Button type='link' icon='save' onClick={handleSave}>\n          保存\n        </Button>\n        {reportInfo.id && (\n          <Button type='link' icon='save' onClick={handleSaveAs}>\n            另存为\n          </Button>\n        )}\n        <Button type='link' icon='plus-circle' onClick={handleAppand}>\n          添加到\n        </Button>\n      </div>\n      <div className={style.description}>\n        <Input defaultValue={reportInfo.description}></Input>\n      </div>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch<IAction>) =>\n  bindActionCreators(\n    {\n      handleAddReport: (params: IReportAddParam) => {\n        return doAddReport.request(params);\n      },\n      handleUpdateReport: (params: IReportUpdateParam) => {\n        return doUpdateReport.request(params);\n      }\n    },\n    dispatch\n  );\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(AnalyseHeader);\n","import { Icon, Collapse, Divider, Select, Input } from 'antd';\nimport React from 'react';\nimport AnalyseRangePicker from '@/components/AnalyseRangePicker';\nimport moment from 'moment';\nimport style from './AnalyseEvent.module.less';\nimport ReactEcharts from 'echarts-for-react';\nimport Indicator from '@/components/Indicator';\nimport Dimension from '@/components/Dimension';\nimport Filter from '@/components/Filter';\nimport AnalyseHeader from './components/AnalyseHeader';\nimport { IReportInfo } from '@/api';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { doAddReport, doUpdateReport } from '@/store/actions';\nimport { IAction, IStoreState } from '@/types';\nconst { Option } = Select;\nconst { Panel } = Collapse;\nconst { Group } = Input;\ninterface Props {\n  reportInfo: IReportInfo;\n}\n\nconst options = {\n  xAxis: {\n    type: 'category',\n    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [\n    {\n      data: [820, 932, 901, 934, 1290, 1330, 1320],\n      type: 'line'\n    }\n  ]\n};\n\nconst onChange = (dates: [moment.Moment, moment.Moment], type: string) => {};\n\nconst AnalyseEvent = ({ reportInfo }: Props) => {\n  const [newInfo, setNewInfo] = React.useState(reportInfo);\n  return (\n    <div>\n      <AnalyseHeader reportInfo={newInfo}></AnalyseHeader>\n      <Collapse defaultActiveKey={['1']}>\n        <Panel header='添加分析规则' key='1'>\n          <div>\n            <div className={style.ruleTitle}>\n              <span>指标:</span>\n              <span className='app-link'>\n                <Icon type='plus' />\n                添加指标\n              </span>\n            </div>\n            <div>\n              <Indicator />\n              <div className='app-link'>\n                <Icon type='plus' />\n                添加筛选\n              </div>\n              <Filter />\n            </div>\n          </div>\n\n          <div>\n            <div className={style.ruleTitle}>\n              <span>维度:</span>\n              <span className='app-link'>\n                <Icon type='plus' />\n                添加维度\n              </span>\n            </div>\n            <Dimension />\n          </div>\n\n          <div>\n            <div className={style.ruleTitle}>\n              <span>筛选:</span>\n              <span className='app-link'>\n                <Icon type='plus' />\n                添加筛选\n              </span>\n            </div>\n            <Filter />\n          </div>\n        </Panel>\n      </Collapse>\n\n      <div>\n        <div>\n          <AnalyseRangePicker onChange={onChange} value={[moment(), moment()]} />\n          |本月\n        </div>\n        <div>\n          <Group compact>\n            <Select style={{ width: '33%' }} defaultValue='Home'>\n              <Option value='Company'>Company</Option>\n            </Select>\n            <Select style={{ width: '33%' }} defaultValue='Home'>\n              <Option value='Home'>折线图</Option>\n              <Option value='Company'>饼图</Option>\n            </Select>\n            <Select style={{ width: '33%' }} defaultValue='Home'>\n              <Option value='Home'>按天</Option>\n              <Option value='Company'>按月</Option>\n            </Select>\n          </Group>\n        </div>\n        <div>\n          <h4>临时使用</h4>\n          <pre>\n            <code></code>\n          </pre>\n        </div>\n        <div>\n          <ReactEcharts option={options} notMerge={true} lazyUpdate={true} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: IStoreState) => {\n  const { reportInfo } = state.report;\n  return {\n    reportInfo\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch<IAction>) => bindActionCreators({}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnalyseEvent);\n","import * as React from 'react';\n\nimport { DatePicker, Tag } from 'antd';\nimport * as moment from 'moment';\nconst RangePicker = DatePicker.RangePicker;\ninterface Props {\n  value?: [moment.Moment, moment.Moment];\n  onChange?: (value: [moment.Moment, moment.Moment], type: string) => void;\n}\n\n//需结合Form组件使用 不能使用函数组件\nclass AnalyseRangePicker extends React.Component<Props> {\n  render() {\n    return (\n      <RangePicker\n        renderExtraFooter={() => (\n          <div>\n            <h3>动态时间:</h3>\n            <Tag>当天</Tag>\n            <Tag>当月</Tag>\n            <Tag>上个月</Tag>\n            <Tag>一周 </Tag>\n          </div>\n        )}\n        format='YYYY-MM-DD'\n        value={this.props.value}\n        onChange={() => {\n          this.props.onChange(this.props.value, '2');\n        }}\n      />\n    );\n  }\n}\n\n// const AnalyseRangePicker = ({ value, onChange }: Props) => {\n//   return (\n//     <RangePicker\n//       renderExtraFooter={() => (\n//         <div>\n//           <h3>动态时间:</h3>\n//           <Tag>当天</Tag>\n//           <Tag>当月</Tag>\n//           <Tag>上个月</Tag>\n//           <Tag>一周 </Tag>\n//         </div>\n//       )}\n//       format='YYYY-MM-DD'\n//       value={value}\n//       onChange={() => {\n//         onChange(value, '2');\n//       }}\n//     />\n//   );\n// };\n\nexport default AnalyseRangePicker;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ruleTitle\":\"AnalyseEvent_ruleTitle__3uJQg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Indicator_wrapper__3B5qd\",\"select\":\"Indicator_select__1kP-z\",\"content\":\"Indicator_content__3-BaR\",\"center\":\"Indicator_center__3Oax_\",\"metadataBox\":\"Indicator_metadataBox__3wnAQ\",\"active\":\"Indicator_active__1aD9o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Dimension_wrapper__Ew76P\",\"center\":\"Dimension_center__1BCis\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Filter_wrapper__9rptJ\",\"center\":\"Filter_center__3PSR3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AnalyseHeader_wrapper__1r0g1\",\"btns\":\"AnalyseHeader_btns__G6iwS\",\"title\":\"AnalyseHeader_title__1X3LF\",\"description\":\"AnalyseHeader_description__1fJOY\"};"],"sourceRoot":""}