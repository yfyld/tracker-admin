{"version":3,"sources":["pages/auth/components/AccountLayout.tsx","pages/auth/components/AccountLayout.module.less","pages/auth/Login.tsx"],"names":["LoginLayout","className","style","wrapper","content","box","form","this","props","children","footer","React","module","exports","connect","dispatch","bindActionCreators","doLoginRequest","params","doLogin","request","Form","create","getFieldDecorator","location","config","singelLoginURL","getCookie","window","replace","signupAble","title","onSubmit","e","preventDefault","validateFields","err","values","message","error","Item","rules","required","prefix","type","color","placeholder","block","htmlType","btn","href","text","to"],"mappings":"qOAMqBA,E,iLAEjB,OACE,uBAAKC,UAAWC,IAAMC,SACpB,uBAAKF,UAAWC,IAAME,SACpB,uBAAKH,UAAWC,IAAMG,KACpB,uBAAKJ,UAAWC,IAAMI,MAAOC,KAAKC,MAAMC,YAG5C,uBAAKR,UAAWC,IAAMQ,c,GATWC,c,qBCLzCC,EAAOC,QAAU,CAAC,QAAU,+BAA+B,KAAO,4BAA4B,QAAU,+BAA+B,IAAM,2BAA2B,KAAO,8B,yDCD/K,2IAqGeC,sBAAQ,MAVI,SAACC,GAAD,OACzBC,YACE,CACEC,eAAgB,SAACC,GACf,OAAOC,IAAQC,QAAQF,KAG3BH,KAGWD,CAAkCO,IAAKC,QAALD,EApEnC,SAAC,GAA+C,IAA7Cf,EAA4C,EAA5CA,KAAMW,EAAsC,EAAtCA,eACbM,GADmD,EAAtBC,SACPlB,EAAtBiB,mBAOR,OALAZ,aAAgB,WACVc,IAAOC,iBAAmBC,YAAU,SACtCC,OAAOJ,SAASK,QAAQJ,IAAOC,kBAEhC,CAACD,IAAOK,aACJL,IAAOC,iBAAmBC,YAAU,QACzC,uDAEA,gBAAC,IAAD,KACE,sBAAI1B,UAAWC,IAAM6B,OAArB,gBACA,gBAAC,IAAD,CAAMC,SAAU,SAACC,GAAD,OAxBL,SAACA,EAAoB3B,EAAwBW,GAC5DgB,EAAEC,iBACF5B,EAAK6B,gBAAe,SAACC,EAAKC,GACpBD,EACFE,IAAQC,MAAM,gEAGhBtB,EAAeoB,MAiBUL,CAASC,EAAG3B,EAAMW,IAAiBhB,UAAU,cAClE,gBAAC,IAAKuC,KAAN,KACGjB,EAAkB,WAAY,CAC7BkB,MAAO,CAAC,CAAEC,UAAU,EAAMJ,QAAS,0CADpCf,CAEE,gBAAC,IAAD,CAAOoB,OAAQ,gBAAC,IAAD,CAAMC,KAAK,SAAS1C,MAAO,CAAE2C,MAAO,qBAAyBC,YAAY,2CAE7F,gBAAC,IAAKN,KAAN,KACGjB,EAAkB,WAAY,CAC7BkB,MAAO,CAAC,CAAEC,UAAU,EAAMJ,QAAS,oCADpCf,CAGC,gBAAC,IAAD,CACEoB,OAAQ,gBAAC,IAAD,CAAMC,KAAK,OAAO1C,MAAO,CAAE2C,MAAO,qBAC1CD,KAAK,WACLE,YAAY,qCAIlB,gBAAC,IAAKN,KAAN,KACE,gBAAC,IAAD,CAAQO,OAAK,EAACH,KAAK,UAAUI,SAAS,SAAS/C,UAAWC,IAAM+C,KAAhE,4BAIA,qBAAGC,KAAMzB,IAAOC,gBACd,gBAAC,IAAD,CAAQqB,OAAK,EAACH,KAAK,UAAU3C,UAAWC,IAAM+C,KAA9C,+CAKDxB,IAAOK,YACN,uBAAK7B,UAAWC,IAAMiD,MAAtB,4BACO,gBAAC,IAAD,CAAMC,GAAG,WAAT,6BADP","file":"static/js/15.a32fc77e.chunk.js","sourcesContent":["import * as React from 'react';\nimport style from './AccountLayout.module.less';\nimport logo from '@/assets/imgs/logo-b.png';\ninterface Props {\n  children: any;\n}\nexport default class LoginLayout extends React.Component<Props> {\n  render() {\n    return (\n      <div className={style.wrapper}>\n        <div className={style.content}>\n          <div className={style.box}>\n            <div className={style.form}>{this.props.children}</div>\n          </div>\n        </div>\n        <div className={style.footer} />\n      </div>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AccountLayout_wrapper__3wTAi\",\"logo\":\"AccountLayout_logo__1b9Tg\",\"content\":\"AccountLayout_content__r-UKX\",\"box\":\"AccountLayout_box__123Rj\",\"form\":\"AccountLayout_form__h1t0o\"};","import * as React from 'react';\nimport { Form, Icon, Input, Button, message } from 'antd';\nimport { WrappedFormUtils } from 'antd/lib/form/Form';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Dispatch } from 'redux';\nimport AccountLayout from './components/AccountLayout';\nimport { Link } from 'react-router-dom';\n\nimport { IAction, IStoreState } from '@/types';\nimport style from './Account.less';\nimport { doLogin } from '@/store/actions';\nimport { ILoginParam } from '@/api';\nimport config from '@/config';\nimport { getCookie } from '@/utils';\n\ninterface Props {\n  form: WrappedFormUtils;\n  location: Location;\n  doLoginRequest: (params: ILoginParam) => {};\n}\n\nconst onSubmit = (e: React.FormEvent, form: WrappedFormUtils, doLoginRequest: (params: ILoginParam) => {}) => {\n  e.preventDefault();\n  form.validateFields((err, values) => {\n    if (err) {\n      message.error('请填写正确的账号信息');\n      return;\n    }\n    doLoginRequest(values);\n  });\n};\n\nconst Login = ({ form, doLoginRequest, location }: Props) => {\n  const { getFieldDecorator } = form;\n\n  React.useEffect(() => {\n    if (config.singelLoginURL && !getCookie('TEST')) {\n      window.location.replace(config.singelLoginURL);\n    }\n  }, [config.signupAble]);\n  return config.singelLoginURL && !getCookie('TEST') ? (\n    <div>正在跳转</div>\n  ) : (\n    <AccountLayout>\n      <h2 className={style.title}>登录</h2>\n      <Form onSubmit={(e) => onSubmit(e, form, doLoginRequest)} className='login-form'>\n        <Form.Item>\n          {getFieldDecorator('username', {\n            rules: [{ required: true, message: '请输入手机号' }]\n          })(<Input prefix={<Icon type='mobile' style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder='请输入手机号' />)}\n        </Form.Item>\n        <Form.Item>\n          {getFieldDecorator('password', {\n            rules: [{ required: true, message: '请输入密码' }]\n          })(\n            <Input\n              prefix={<Icon type='lock' style={{ color: 'rgba(0,0,0,.25)' }} />}\n              type='password'\n              placeholder='请输入密码'\n            />\n          )}\n        </Form.Item>\n        <Form.Item>\n          <Button block type='primary' htmlType='submit' className={style.btn}>\n            登&emsp;&emsp;录\n          </Button>\n\n          <a href={config.singelLoginURL}>\n            <Button block type='primary' className={style.btn}>\n              内&emsp;网&emsp;登&emsp;录\n            </Button>\n          </a>\n\n          {config.signupAble && (\n            <div className={style.text}>\n              没有账号 <Link to='/signup'>马上注册!</Link>(测试用,请直接内网登录)\n            </div>\n          )}\n        </Form.Item>\n      </Form>\n    </AccountLayout>\n  );\n};\n\nconst mapStateToProps = (state: IStoreState) => {\n  const { location } = state.router;\n  return {\n    location\n  };\n};\nconst mapDispatchToProps = (dispatch: Dispatch<IAction>) =>\n  bindActionCreators(\n    {\n      doLoginRequest: (params: ILoginParam) => {\n        return doLogin.request(params);\n      }\n    },\n    dispatch\n  );\n\nexport default connect(null, mapDispatchToProps)(Form.create()(Login));\n"],"sourceRoot":""}